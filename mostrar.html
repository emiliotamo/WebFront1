<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Cervezas</title>
    <link rel="stylesheet" href="css/webfront.css">
</head>
<body>
    
    <header>
        <nav>
            <a href="index.html" class="logo">FrontWeb</a>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="mostrar.html">Mostrar Cervezas</a></li>
                <li><a href="añadir.html">Añadir</a></li>
                <li><a href="editar.html">Editar</a></li>
                <li><a href="eliminar.html">Eliminar</a></li>
            </ul>
        </nav>
    </header>

    <h1>Lista de Cervezas</h1>
    <button id="getCervezasBtn">Obtener Cervezas</button>
    <div id="cervezaList" class="cerveza-list"></div> <!-- Aquí se mostrarán las cervezas -->

    <script>
      const apiBaseUrl = 'http://localhost:5259'; // URL base de la API
      const cervezaList = document.getElementById('cervezaList');
  
      document.getElementById('getCervezasBtn').addEventListener('click', async () => {
        try {
          const response = await fetch(`${apiBaseUrl}/cervezas`);
          if (!response.ok) throw new Error('Error al obtener las cervezas');
          const data = await response.json();
          console.log('Datos obtenidos:', data);
          
          // Limpiar la lista antes de mostrar nuevas cervezas
          cervezaList.innerHTML = '';
  
          // Mostrar las cervezas de forma más estética
          data.forEach(cerveza => {
            const card = document.createElement('div');
            card.classList.add('cerveza-card');
            
            const nombre = document.createElement('h2');
            nombre.textContent = cerveza.nombre;
            card.appendChild(nombre);
            
            const graduacion = document.createElement('p');
            graduacion.textContent = `Graduación: ${cerveza.graduacion}%`;
            card.appendChild(graduacion);
            
            const pais = document.createElement('p');
            pais.textContent = `País: ${cerveza.pais}`;
            card.appendChild(pais);
            
            // Agregar la tarjeta a la lista
            cervezaList.appendChild(card);
          });
  
        } catch (error) {
          console.error('Error al conectar con la API:', error.message);
          cervezaList.innerHTML = 'Error al conectar con la API.';
        }
      });
    </script>

    <footer class="border-top footer text-muted">
        <div class="container">
            &copy; 2024 - FrontWeb - Emilio Tamayo <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
        </div>
    </footer>
</body>
</html>
